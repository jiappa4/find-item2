# 자동 스크래핑 + 로딩바 기능

## 🎯 주요 기능

### 1. 자동 스크래핑
- 검색 결과가 없으면 자동으로 8개 쇼핑몰 스크래핑 시작
- 사용자가 수동으로 배치 실행할 필요 없음

### 2. 실시간 로딩바
- 스크래핑 진행률 표시 (0-100%)
- 현재 수집 중인 쇼핑몰 표시
- 각 쇼핑몰별 상태 (대기/수집중/완료)

### 3. 진행상황 추적
- 8개 쇼핑몰 개별 상태 표시
- 예상 소요 시간 안내
- 수집 완료 후 자동 재검색

## 📂 생성된 파일

```
backend/
├── api_server_auto_scrape.py  # 자동 스크래핑 지원 API 서버
└── scraper_all_sites.py        # 8개 쇼핑몰 스크래핑 스크립트

index_auto_scrape.html           # 자동 스크래핑 UI (로딩바 포함)
README_AUTO_SCRAPE.md            # 이 가이드 문서
```

## 🚀 사용 방법

### 1단계: API 서버 실행
```bash
cd backend
python api_server_auto_scrape.py
```

### 2단계: 웹 브라우저 열기
```
index_auto_scrape.html 파일 더블클릭
```

### 3단계: 검색
1. 검색어 입력 (예: "다이슨 청소기")
2. 검색 버튼 클릭
3. 결과 없으면 자동으로 스크래핑 시작
4. 로딩바로 진행상황 확인
5. 완료 후 자동으로 결과 표시

## 🔄 동작 흐름

```
사용자 검색 입력
    ↓
DB에서 검색 시도
    ↓
결과 있음? → 예 → 결과 표시
    ↓ 아니오
자동 스크래핑 트리거
    ↓
로딩바 표시 시작
    ↓
8개 쇼핑몰 순차 수집
  - 네이버쇼핑 → 쿠팡 → G마켓
  - 11번가 → 옥션 → SSG
  - 롯데온 → 인터파크
    ↓
진행률 업데이트 (실시간)
    ↓
스크래핑 완료 (100%)
    ↓
자동 재검색
    ↓
결과 표시
```

## 📊 로딩바 화면

```
┌─────────────────────────────────────────┐
│          스크래핑 중...                  │
│      [스피너 애니메이션]                │
│      쿠팡 수집 중...                     │
├─────────────────────────────────────────┤
│ 진행 상황                         25%   │
│ ████████░░░░░░░░░░░░░░░░░░░░           │
├─────────────────────────────────────────┤
│ [네이버✓] [쿠팡●] [G마켓] [11번가]    │
│ [옥션] [SSG] [롯데온] [인터파크]       │
├─────────────────────────────────────────┤
│ ⏱️ 예상 소요 시간: 약 2-3분             │
└─────────────────────────────────────────┘

범례:
✓ = 완료 (초록)
● = 진행 중 (파랑)
□ = 대기 중 (회색)
```

## 🆚 기존 버전과 비교

### 기존 (index.html + api_server.py)
❌ 결과 없으면 수동으로 배치 실행 필요
❌ 스크래핑 진행 상황 알 수 없음
❌ 완료 여부 확인 어려움

### 신규 (index_auto_scrape.html + api_server_auto_scrape.py)
✅ 자동 스크래핑 트리거
✅ 실시간 로딩바 표시
✅ 쇼핑몰별 진행 상태
✅ 완료 후 자동 재검색

## 📝 주의사항

1. **동시 스크래핑 제한**
   - 한 번에 하나의 스크래핑만 가능
   - 진행 중 재시도 시 경고 메시지

2. **브라우저 탭 유지**
   - 스크래핑 중 탭 닫지 말 것
   - 진행 상황 확인 필요

3. **네트워크 안정성**
   - 안정적인 인터넷 연결 필요
   - 실패 시 재시도

## 🔄 업데이트 이력

### v2.1.0 (2025-11-11)
- 자동 스크래핑 기능 추가
- 실시간 로딩바 구현
- 8개 쇼핑몰 상태 표시
- 진행 상황 폴링 시스템
